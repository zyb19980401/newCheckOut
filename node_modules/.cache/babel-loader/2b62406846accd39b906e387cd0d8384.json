{"ast":null,"code":"var counterForBadge = 0;\nvar d = new Date();\n\nfunction loggg() {\n  console.log(\"we r in the scrip11122222222!!!\");\n}\n\nfunction loadVariables() {\n  hideBadgeCounter();\n  document.getElementById('moreCallbacks').style.display = \"none\";\n  document.getElementById('morePreload').style.display = \"none\";\n  document.getElementById('moreReceipt').style.display = \"none\";\n  document.getElementById('loaderPreload').style.display = \"none\";\n  document.getElementById('loaderReceipt').style.display = \"none\"; // openPage('checkout', tabRed, '#6DC7BE')\n} // Get the modal\n\n\nvar callbackModal = document.getElementById(\"myCallbackModal\"); // Get the button that opens the modal\n\nvar btn = document.getElementById(\"myBtn\"); // Get the <span> element that closes the modal\n\nvar span = document.getElementsByClassName(\"close\")[0]; // When the user clicks the button, open the modal\n\nbtn.onclick = function () {\n  callbackModal.style.display = \"block\";\n}; // When the user clicks on <span> (x), close the modal\n\n\nspan.onclick = function () {\n  callbackModal.style.display = \"none\";\n}; // Get the error modal\n\n\nvar errorModal = document.getElementById(\"myErrorModal\"); // Get the <span> element that closes the modal\n\nvar spanError = document.getElementsByClassName(\"close2\")[0]; // When the user clicks on <span> (x), close the modal\n\nspanError.onclick = function () {\n  errorModal.style.display = \"none\";\n}; // When the user clicks anywhere outside of the modal, close it\n\n\nwindow.onclick = function (event) {\n  if (event.target == errorModal) {\n    errorModal.style.display = \"none\";\n  }\n\n  if (event.target == callbackModal) {\n    callbackModal.style.display = \"none\";\n  }\n};\n\nfunction readSingleFile(evt) {\n  //Retrieve the first (and only!) File from the FileList object\n  var f = evt.target.files[0];\n\n  if (f) {\n    var r = new FileReader();\n\n    r.onload = function (f) {\n      var contents = f.target.result;\n      var parser = new DOMParser();\n      var xmlDoc = parser.parseFromString(contents, \"text/xml\");\n      document.getElementById('storeId').value = xmlDoc.getElementsByTagName(\"storeId\")[0].childNodes[0].nodeValue;\n      document.getElementById('apiToken').value = xmlDoc.getElementsByTagName(\"apiToken\")[0].childNodes[0].nodeValue;\n      document.getElementById('checkoutId').value = xmlDoc.getElementsByTagName(\"checkoutId\")[0].childNodes[0].nodeValue;\n      changeCheckoutValuesFunction();\n      document.getElementById('myForm').reset();\n    };\n\n    r.readAsText(f);\n  } else {\n    alert(\"Failed to load file\");\n  }\n}\n\ndocument.getElementById('myFile').addEventListener('change', readSingleFile, false);\ndocument.getElementById('storeIdReceipt').innerHTML = document.getElementById('storeId').value;\ndocument.getElementById('apiTokenReceipt').innerHTML = document.getElementById('apiToken').value;\ndocument.getElementById('checkoutIdReceipt').innerHTML = document.getElementById('checkoutId').value;\n\nfunction changePreloadRequest() {\n  var str = document.getElementById(\"preloadRequestCode\").value;\n  var n = str.indexOf(\":\");\n  var n1 = str.indexOf('\"', n);\n  var n2 = str.indexOf('\",', n1);\n  var s1 = str.substring(n1 + 1, n2);\n  str = str.replace(s1, document.getElementById('storeId').value);\n  n = str.indexOf(\":\", n2);\n  n1 = str.indexOf('\"', n);\n  n2 = str.indexOf('\",', n1);\n  s1 = str.substring(n1 + 1, n2);\n  str = str.replace(s1, document.getElementById('apiToken').value);\n  n = str.indexOf(\":\", n2);\n  n1 = str.indexOf('\"', n);\n  n2 = str.indexOf('\",', n1);\n  s1 = str.substring(n1 + 1, n2);\n  str = str.replace(s1, document.getElementById('checkoutId').value);\n  document.getElementById(\"preloadRequestCode\").value = str;\n}\n\nfunction changeCheckoutValuesFunction() {\n  document.getElementById('storeIdReceipt').innerHTML = document.getElementById('storeId').value;\n  document.getElementById('apiTokenReceipt').innerHTML = document.getElementById('apiToken').value;\n  document.getElementById('checkoutIdReceipt').innerHTML = document.getElementById('checkoutId').value;\n  changePreloadRequest();\n  var x = document.getElementById('snackbar');\n  x.className = \"show\";\n  setTimeout(function () {\n    x.className = x.className.replace(\"show\", \"\");\n  }, 3000);\n}\n\nvar acc = document.getElementsByClassName(\"accordion\");\nvar i;\n\nfor (i = 0; i < acc.length; i++) {\n  acc[i].addEventListener(\"click\", function () {\n    this.classList.toggle(\"active\");\n    var panel = this.nextElementSibling;\n\n    if (panel.style.maxHeight) {\n      panel.style.maxHeight = null;\n    } else {\n      panel.style.maxHeight = \"100%\";\n    }\n  });\n}\n\nfunction openReference(evt, tabName) {\n  var i, tabsimplecontent, tablinks;\n  tabsimplecontent = document.getElementsByClassName(\"tabsimplecontent\");\n\n  for (i = 0; i < tabsimplecontent.length; i++) {\n    tabsimplecontent[i].style.display = \"none\";\n  }\n\n  tablinks = document.getElementsByClassName(\"tablinks\");\n\n  for (i = 0; i < tablinks.length; i++) {\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\n  }\n\n  document.getElementById(tabName).style.display = \"block\";\n  evt.currentTarget.className += \" active\";\n}\n\nfunction openPage(pageName, elmnt, color) {\n  var i, tabcontent, tablinks;\n  tabcontent = document.getElementsByClassName(\"tabcontent\");\n\n  for (i = 0; i < tabcontent.length; i++) {\n    tabcontent[i].style.display = \"none\";\n  }\n\n  tablinks = document.getElementsByClassName(\"tablink\");\n\n  for (i = 0; i < tablinks.length; i++) {\n    tablinks[i].style.backgroundColor = \"\";\n  }\n\n  document.getElementById(pageName).style.display = \"block\";\n  elmnt.style.backgroundColor = color;\n\n  if (pageName == 'preload') {\n    document.getElementById(\"preloadDefaultOpen\").click();\n  } else if (pageName == 'receipt') {\n    document.getElementById(\"receiptDefaultOpen\").click();\n  }\n}\n\nfunction showObject(data) {\n  var result = \"\";\n\n  for (var p in data) {\n    result += p + \" , \" + data[p] + \"\\n\";\n  }\n\n  console.log(result);\n}\n\nfunction preloadRequestFunction(code) {\n  var request = new XMLHttpRequest(); // openPage('preload', tabGreen, '#6DC7BE')\n\n  document.getElementById('loaderPreload').style.display = \"block\";\n  document.getElementById('preloadSection').style.display = \"none\";\n  request.open('POST', 'https://gatewayt.moneris.com/chkt/request/request.php');\n  request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n  request.onreadystatechange = function () {\n    // Begin accessing JSON data here\n    try {\n      var data = JSON.parse(this.response);\n      showObject(data);\n      var codeJSON = JSON.stringify(this.response);\n      codeJSON = codeJSON.replace(/\"\\\\n|\\\\/g, '');\n      codeJSON = codeJSON.replace(/}\"/g, '}');\n      var codeJSONFormatted = returnDataFormatted(codeJSON);\n      var codeLinesPreload = '';\n\n      if (request.status == 200 && request.readyState == 4) {\n        var count = (codeJSONFormatted.match(/<br/g) || []).length;\n        var i;\n\n        for (i = 1; i <= count + 1; i++) {\n          codeLinesPreload += \"<span>\" + i + \"</span>\";\n        }\n\n        codeLinesPreload = codeLinesPreload.replace(/\\[object HTMLSpanElement\\]/, '');\n        codeLinesPreload = codeLinesPreload.replace(/\\[object HTMLCollection\\]/, '');\n        document.getElementById(\"codeLinesPreload\").innerHTML = codeLinesPreload;\n        document.getElementById(\"codePreload\").innerHTML = codeJSONFormatted;\n        document.getElementById('loaderPreload').style.display = \"none\";\n        document.getElementById('preloadSection').style.display = \"inline\";\n        document.getElementById(\"ticketNumber\").innerHTML = data.response.ticket;\n        document.getElementById(\"ticketNumber1\").innerHTML = data.response.ticket;\n        document.getElementById(\"ticketNumber2\").innerHTML = data.response.ticket;\n      }\n    } catch (err) {\n      if (request.readyState == 4) {\n        document.getElementById(\"codeLinesPreload\").innerHTML = \"\";\n        document.getElementById(\"codePreload\").innerHTML = \"Unexpected end of JSON input\";\n        document.getElementById('loaderPreload').style.display = \"none\";\n        document.getElementById('preloadSection').style.display = \"inline\";\n        errorModal.style.display = \"block\";\n      }\n    }\n  };\n\n  request.send(code);\n}\n\nfunction receiptRequestFunction(storeId, apiToken, checkoutId, ticket) {\n  // openPage('receipt', tabBlue, '#6DC7BE')\n  document.getElementById('loaderReceipt').style.display = \"block\";\n  document.getElementById('receiptSection').style.display = \"none\";\n  var requestCode = '{\"store_id\":\"#STOREID#\",\"api_token\":\"#APITOKEN#\",\"checkout_id\":\"#CHECKOUTID#\",\"ticket\":\"#TICKET#\",\"environment\":\"qa\",\"action\":\"receipt\"}';\n  requestCode = requestCode.replace(/#STOREID#/, storeId);\n  requestCode = requestCode.replace(/#APITOKEN#/, apiToken);\n  requestCode = requestCode.replace(/#CHECKOUTID#/, checkoutId);\n  requestCode = requestCode.replace(/#TICKET#/, ticket);\n  var request2 = new XMLHttpRequest();\n  request2.open('POST', 'https://gatewayt.moneris.com/chkt/request/request.php');\n  request2.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n  request2.onreadystatechange = function () {\n    // Begin accessing JSON data here\n    try {\n      var data = JSON.parse(this.response);\n      var codeJSON = JSON.stringify(this.response);\n      codeJSON = codeJSON.replace(/\"\\\\n|\\\\/g, '');\n      codeJSON = codeJSON.replace(/}\"/g, '}');\n      var codeJSONFormatted = returnDataFormatted(codeJSON);\n      var codeLinesReceipt = '';\n\n      if (request2.status == 200 && request2.readyState == 4) {\n        var count = (codeJSONFormatted.match(/<br/g) || []).length;\n        var i;\n\n        for (i = 1; i <= count + 1; i++) {\n          codeLinesReceipt += \"<span>\" + i + \"</span>\";\n        }\n\n        codeLinesReceipt = codeLinesReceipt.replace(/\\[object HTMLSpanElement\\]/, '');\n        codeLinesReceipt = codeLinesReceipt.replace(/\\[object HTMLCollection\\]/, '');\n        document.getElementById(\"codeLinesReceipt\").innerHTML = codeLinesReceipt;\n        codeJSONFormatted = codeJSONFormatted.replace(/\"response\" :/, '<div class=\"tooltip\">\"response\" :<span class=\"tooltiptext\">Top level response object</span></div>');\n        document.getElementById(\"codeReceipt\").innerHTML = codeJSONFormatted;\n        document.getElementById('loaderReceipt').style.display = \"none\";\n        document.getElementById('receiptSection').style.display = \"inline\";\n      }\n    } catch (err) {\n      if (request2.readyState == 4) {\n        document.getElementById(\"codeLinesReceipt\").innerHTML = \"\";\n        document.getElementById(\"codeReceipt\").innerHTML = \"Unexpected end of JSON input\";\n        document.getElementById('loaderReceipt').style.display = \"none\";\n        document.getElementById('receiptSection').style.display = \"inline\";\n        errorModal.style.display = \"block\";\n      }\n    }\n  };\n\n  request2.send(requestCode);\n}\n\nfunction returnDataFormatted(data) {\n  var x;\n  var dataFormatted = '';\n  var count = '';\n\n  for (x of data) {\n    if (x == '{') {\n      count += '&emsp;&emsp;';\n      dataFormatted += '{<br />' + count;\n    } else if (x == ',') {\n      dataFormatted += ',<br />' + count;\n    } else if (x == '}') {\n      count = count.substring(0, count.length - 12);\n      dataFormatted += '<br />' + count + '}';\n    } else {\n      dataFormatted += x;\n    }\n  }\n\n  return dataFormatted;\n}\n\nfunction addZero(i) {\n  if (i < 10) {\n    i = \"0\" + i;\n  }\n\n  return i;\n}\n\nfunction returnTimestamp() {\n  var d = new Date();\n  var timestamp = document.getElementById(\"demo\");\n  var h = addZero(d.getHours());\n  var m = addZero(d.getMinutes());\n  var s = addZero(d.getSeconds());\n  return timestamp = h + \":\" + m + \":\" + s;\n}\n\nfunction readMoreLess(moreId, buttonId) {\n  var more = document.getElementById(moreId);\n  var btn = document.getElementById(buttonId);\n  console.log(more);\n\n  if (more.style.display === \"none\") {\n    btn.innerHTML = \"Read Less\";\n    btn.className = \"less\";\n    more.style.display = \"inline\";\n  } else {\n    btn.innerHTML = \"Read More\";\n    btn.className = \"more\";\n    more.style.display = \"none\";\n  }\n}\n\nfunction hideBadgeCounter() {\n  counterForBadge = 0;\n  document.getElementById('badgeCounter').style.display = \"none\";\n}\n\nfunction showBadgeCounter() {\n  counterForBadge += 1;\n  document.getElementById('badgeCounter').innerHTML = counterForBadge;\n  document.getElementById('badgeCounter').style.display = \"block\";\n}\n\nfunction insertCallbackHTML(title, data) {\n  var html_to_insert = '<p class=\"callback\"><b>' + title + ':<span style=\"float: right;\">' + returnTimestamp() + '</span></b><br>' + returnDataFormatted(data) + '</p>';\n  document.getElementById('modalBody').insertAdjacentHTML('afterbegin', html_to_insert);\n}","map":{"version":3,"sources":["/Users/chriszhang/Desktop/CheckOutPage/CheckOutPage/checkout/src/script.js"],"names":["counterForBadge","d","Date","loggg","console","log","loadVariables","hideBadgeCounter","document","getElementById","style","display","callbackModal","btn","span","getElementsByClassName","onclick","errorModal","spanError","window","event","target","readSingleFile","evt","f","files","r","FileReader","onload","contents","result","parser","DOMParser","xmlDoc","parseFromString","value","getElementsByTagName","childNodes","nodeValue","changeCheckoutValuesFunction","reset","readAsText","alert","addEventListener","innerHTML","changePreloadRequest","str","n","indexOf","n1","n2","s1","substring","replace","x","className","setTimeout","acc","i","length","classList","toggle","panel","nextElementSibling","maxHeight","openReference","tabName","tabsimplecontent","tablinks","currentTarget","openPage","pageName","elmnt","color","tabcontent","backgroundColor","click","showObject","data","p","preloadRequestFunction","code","request","XMLHttpRequest","open","setRequestHeader","onreadystatechange","JSON","parse","response","codeJSON","stringify","codeJSONFormatted","returnDataFormatted","codeLinesPreload","status","readyState","count","match","ticket","err","send","receiptRequestFunction","storeId","apiToken","checkoutId","requestCode","request2","codeLinesReceipt","dataFormatted","addZero","returnTimestamp","timestamp","h","getHours","m","getMinutes","s","getSeconds","readMoreLess","moreId","buttonId","more","showBadgeCounter","insertCallbackHTML","title","html_to_insert","insertAdjacentHTML"],"mappings":"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","sourcesContent":["var counterForBadge = 0;\r\nvar d = new Date();\r\n\r\n\r\nfunction loggg(){\r\n  console.log(\"we r in the scrip11122222222!!!\");\r\n}\r\n\r\nfunction loadVariables() {\r\n  hideBadgeCounter();\r\n  document.getElementById('moreCallbacks').style.display = \"none\";\r\n  document.getElementById('morePreload').style.display = \"none\";\r\n  document.getElementById('moreReceipt').style.display = \"none\";\r\n  document.getElementById('loaderPreload').style.display = \"none\";\r\n  document.getElementById('loaderReceipt').style.display = \"none\";\r\n  // openPage('checkout', tabRed, '#6DC7BE')\r\n}\r\n\r\n// Get the modal\r\nvar callbackModal = document.getElementById(\"myCallbackModal\");\r\n\r\n// Get the button that opens the modal\r\nvar btn = document.getElementById(\"myBtn\");\r\n\r\n// Get the <span> element that closes the modal\r\nvar span = document.getElementsByClassName(\"close\")[0];\r\n\r\n// When the user clicks the button, open the modal\r\nbtn.onclick = function() {\r\n  callbackModal.style.display = \"block\";\r\n}\r\n\r\n// When the user clicks on <span> (x), close the modal\r\nspan.onclick = function() {\r\n  callbackModal.style.display = \"none\";\r\n}\r\n\r\n// Get the error modal\r\nvar errorModal = document.getElementById(\"myErrorModal\");\r\n\r\n// Get the <span> element that closes the modal\r\nvar spanError = document.getElementsByClassName(\"close2\")[0];\r\n\r\n// When the user clicks on <span> (x), close the modal\r\nspanError.onclick = function() {\r\n  errorModal.style.display = \"none\";\r\n}\r\n\r\n// When the user clicks anywhere outside of the modal, close it\r\nwindow.onclick = function(event) {\r\n  if (event.target == errorModal) {\r\n    errorModal.style.display = \"none\";\r\n  }\r\n\r\n  if (event.target == callbackModal) {\r\n    callbackModal.style.display = \"none\";\r\n  }\r\n}\r\n\r\nfunction readSingleFile(evt) {\r\n  //Retrieve the first (and only!) File from the FileList object\r\n  var f = evt.target.files[0];\r\n\r\n  if (f) {\r\n    var r = new FileReader();\r\n    r.onload = function(f) {\r\n      var contents = f.target.result;\r\n      var parser = new DOMParser();\r\n      var xmlDoc = parser.parseFromString(contents,\"text/xml\");\r\n\r\n      document.getElementById('storeId').value = xmlDoc.getElementsByTagName(\"storeId\")[0].childNodes[0].nodeValue\r\n      document.getElementById('apiToken').value = xmlDoc.getElementsByTagName(\"apiToken\")[0].childNodes[0].nodeValue\r\n      document.getElementById('checkoutId').value = xmlDoc.getElementsByTagName(\"checkoutId\")[0].childNodes[0].nodeValue\r\n      changeCheckoutValuesFunction()\r\n\r\n      document.getElementById('myForm').reset();\r\n    };\r\n    r.readAsText(f);\r\n  } else {\r\n    alert(\"Failed to load file\");\r\n  }\r\n}\r\n\r\ndocument.getElementById('myFile').addEventListener('change', readSingleFile, false);\r\n\r\ndocument.getElementById('storeIdReceipt').innerHTML = document.getElementById('storeId').value;\r\ndocument.getElementById('apiTokenReceipt').innerHTML = document.getElementById('apiToken').value;\r\ndocument.getElementById('checkoutIdReceipt').innerHTML = document.getElementById('checkoutId').value;\r\n\r\nfunction changePreloadRequest(){\r\n  var str = document.getElementById(\"preloadRequestCode\").value\r\n  var n = str.indexOf(\":\");\r\n  var n1 = str.indexOf('\"', n);\r\n  var n2 = str.indexOf('\",', n1);\r\n  var s1 = str.substring(n1+1, n2);\r\n  str = str.replace(s1, document.getElementById('storeId').value)\r\n  n = str.indexOf(\":\", n2);\r\n  n1 = str.indexOf('\"', n);\r\n  n2 = str.indexOf('\",', n1);\r\n  s1 = str.substring(n1+1, n2);\r\n  str = str.replace(s1, document.getElementById('apiToken').value)\r\n  n = str.indexOf(\":\", n2);\r\n  n1 = str.indexOf('\"', n);\r\n  n2 = str.indexOf('\",', n1);\r\n  s1 = str.substring(n1+1, n2);\r\n  str = str.replace(s1, document.getElementById('checkoutId').value)\r\n  document.getElementById(\"preloadRequestCode\").value = str;\r\n}\r\n\r\nfunction changeCheckoutValuesFunction() {\r\n  document.getElementById('storeIdReceipt').innerHTML = document.getElementById('storeId').value;\r\n  document.getElementById('apiTokenReceipt').innerHTML = document.getElementById('apiToken').value;\r\n  document.getElementById('checkoutIdReceipt').innerHTML = document.getElementById('checkoutId').value;\r\n\r\n  changePreloadRequest()\r\n  var x = document.getElementById('snackbar');\r\n  x.className = \"show\";\r\n  setTimeout(function(){ x.className = x.className.replace(\"show\", \"\"); }, 3000);\r\n}\r\n\r\nvar acc = document.getElementsByClassName(\"accordion\");\r\nvar i;\r\n\r\nfor (i = 0; i < acc.length; i++) {\r\n  acc[i].addEventListener(\"click\", function() {\r\n    this.classList.toggle(\"active\");\r\n    var panel = this.nextElementSibling;\r\n    if (panel.style.maxHeight) {\r\n      panel.style.maxHeight = null;\r\n    } else {\r\n      panel.style.maxHeight = \"100%\";\r\n    }\r\n  });\r\n}\r\n\r\nfunction openReference(evt,tabName) {\r\n  var i, tabsimplecontent, tablinks;\r\n\r\n  tabsimplecontent = document.getElementsByClassName(\"tabsimplecontent\");\r\n  for (i = 0; i < tabsimplecontent.length; i++) {\r\n    tabsimplecontent[i].style.display = \"none\";\r\n  }\r\n\r\n  tablinks = document.getElementsByClassName(\"tablinks\");\r\n  for (i = 0; i < tablinks.length; i++) {\r\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\r\n  }\r\n\r\n  document.getElementById(tabName).style.display = \"block\";\r\n  evt.currentTarget.className += \" active\";\r\n}\r\n\r\nfunction openPage(pageName,elmnt,color) {\r\n  var i, tabcontent, tablinks;\r\n  tabcontent = document.getElementsByClassName(\"tabcontent\");\r\n  for (i = 0; i < tabcontent.length; i++) {\r\n    tabcontent[i].style.display = \"none\";\r\n  }\r\n  tablinks = document.getElementsByClassName(\"tablink\");\r\n  for (i = 0; i < tablinks.length; i++) {\r\n    tablinks[i].style.backgroundColor = \"\";\r\n  }\r\n  document.getElementById(pageName).style.display = \"block\";\r\n  elmnt.style.backgroundColor = color;\r\n\r\n  if (pageName == 'preload'){\r\n    document.getElementById(\"preloadDefaultOpen\").click();\r\n  } else if (pageName == 'receipt') {\r\n    document.getElementById(\"receiptDefaultOpen\").click();\r\n  }\r\n}\r\n\r\nfunction showObject(data) {\r\n  var result = \"\";\r\n  for (var p in data) {\r\n      result += p + \" , \" + data[p] + \"\\n\";\r\n  }\r\n  console.log(result);\r\n}\r\n\r\nfunction preloadRequestFunction(code){\r\n  var request = new XMLHttpRequest()\r\n  // openPage('preload', tabGreen, '#6DC7BE')\r\n  document.getElementById('loaderPreload').style.display = \"block\";\r\n  document.getElementById('preloadSection').style.display = \"none\";\r\n\r\n  request.open('POST', 'https://gatewayt.moneris.com/chkt/request/request.php')\r\n  request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\r\n  request.onreadystatechange = function() {\r\n    // Begin accessing JSON data here\r\n\r\n    try {\r\n      var data = JSON.parse(this.response)\r\n      showObject(data);\r\n\r\n      var codeJSON = JSON.stringify(this.response)\r\n      codeJSON = codeJSON.replace(/\"\\\\n|\\\\/g, '')\r\n      codeJSON = codeJSON.replace(/}\"/g, '}')\r\n\r\n      var codeJSONFormatted = returnDataFormatted(codeJSON);\r\n      var codeLinesPreload = '';\r\n      if (request.status == 200 && request.readyState == 4) {\r\n\t       var count = (codeJSONFormatted.match(/<br/g) || []).length\r\n\t       var i;\r\n\t       for (i = 1; i <= count+1; i++) {\r\n  \t       codeLinesPreload += \"<span>\" + i + \"</span>\";\r\n\t       }\r\n\t       codeLinesPreload = codeLinesPreload.replace(/\\[object HTMLSpanElement\\]/,'')\r\n\t       codeLinesPreload = codeLinesPreload.replace(/\\[object HTMLCollection\\]/,'')\r\n\t       document.getElementById(\"codeLinesPreload\").innerHTML = codeLinesPreload\r\n\t       document.getElementById(\"codePreload\").innerHTML = codeJSONFormatted\r\n\r\n         document.getElementById('loaderPreload').style.display = \"none\";\r\n         document.getElementById('preloadSection').style.display = \"inline\";\r\n\r\n         document.getElementById(\"ticketNumber\").innerHTML = data.response.ticket\r\n\t       document.getElementById(\"ticketNumber1\").innerHTML = data.response.ticket\r\n\t       document.getElementById(\"ticketNumber2\").innerHTML = data.response.ticket\r\n      }\r\n    } catch (err) {\r\n        if (request.readyState == 4) {\r\n          document.getElementById(\"codeLinesPreload\").innerHTML = \"\"\r\n          document.getElementById(\"codePreload\").innerHTML = \"Unexpected end of JSON input\";\r\n          document.getElementById('loaderPreload').style.display = \"none\";\r\n          document.getElementById('preloadSection').style.display = \"inline\";\r\n          errorModal.style.display = \"block\";\r\n        }\r\n      }\r\n    }\r\n\r\n  request.send(code)\r\n}\r\n\r\nfunction receiptRequestFunction(storeId, apiToken, checkoutId, ticket) {\r\n  // openPage('receipt', tabBlue, '#6DC7BE')\r\n  document.getElementById('loaderReceipt').style.display = \"block\";\r\n  document.getElementById('receiptSection').style.display = \"none\";\r\n\r\n  var requestCode = '{\"store_id\":\"#STOREID#\",\"api_token\":\"#APITOKEN#\",\"checkout_id\":\"#CHECKOUTID#\",\"ticket\":\"#TICKET#\",\"environment\":\"qa\",\"action\":\"receipt\"}';\r\n  requestCode = requestCode.replace(/#STOREID#/, storeId);\r\n  requestCode = requestCode.replace(/#APITOKEN#/, apiToken);\r\n  requestCode = requestCode.replace(/#CHECKOUTID#/, checkoutId);\r\n  requestCode = requestCode.replace(/#TICKET#/, ticket);\r\n\r\n  var request2 = new XMLHttpRequest()\r\n  request2.open('POST', 'https://gatewayt.moneris.com/chkt/request/request.php')\r\n  request2.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\r\n  request2.onreadystatechange = function() {\r\n    // Begin accessing JSON data here\r\n    try {\r\n      var data = JSON.parse(this.response)\r\n      var codeJSON = JSON.stringify(this.response)\r\n      codeJSON = codeJSON.replace(/\"\\\\n|\\\\/g, '')\r\n      codeJSON = codeJSON.replace(/}\"/g, '}')\r\n\r\n      var codeJSONFormatted = returnDataFormatted(codeJSON)\r\n      var codeLinesReceipt = '';\r\n\r\n      if (request2.status == 200 && request2.readyState == 4) {\r\n\t       var count = (codeJSONFormatted.match(/<br/g) || []).length\r\n\t       var i;\r\n\t       for (i = 1; i <= count+1; i++) {\r\n  \t       codeLinesReceipt += \"<span>\" + i + \"</span>\";\r\n         }\r\n         codeLinesReceipt = codeLinesReceipt.replace(/\\[object HTMLSpanElement\\]/,'')\r\n         codeLinesReceipt = codeLinesReceipt.replace(/\\[object HTMLCollection\\]/,'')\r\n         document.getElementById(\"codeLinesReceipt\").innerHTML = codeLinesReceipt\r\n\r\n         codeJSONFormatted = codeJSONFormatted.replace(/\"response\" :/,'<div class=\"tooltip\">\"response\" :<span class=\"tooltiptext\">Top level response object</span></div>')\r\n\r\n         document.getElementById(\"codeReceipt\").innerHTML = codeJSONFormatted\r\n\r\n         document.getElementById('loaderReceipt').style.display = \"none\";\r\n         document.getElementById('receiptSection').style.display = \"inline\";\r\n       }\r\n     } catch (err) {\r\n        if (request2.readyState == 4) {\r\n          document.getElementById(\"codeLinesReceipt\").innerHTML = \"\"\r\n          document.getElementById(\"codeReceipt\").innerHTML = \"Unexpected end of JSON input\";\r\n          document.getElementById('loaderReceipt').style.display = \"none\";\r\n          document.getElementById('receiptSection').style.display = \"inline\";\r\n          errorModal.style.display = \"block\";\r\n        }\r\n      }\r\n    }\r\n  request2.send(requestCode)\r\n}\r\n\r\nfunction returnDataFormatted(data) {\r\n  var x;\r\n  var dataFormatted = '';\r\n  var count = '';\r\n\r\n  for (x of data) {\r\n    if (x == '{') {\r\n      count += '&emsp;&emsp;';\r\n      dataFormatted += '{<br />' + count;\r\n    } else if (x == ',') {\r\n      dataFormatted += ',<br />' + count;\r\n    } else if (x == '}'){\r\n      count = count.substring(0, count.length - 12);\r\n      dataFormatted += '<br />' + count + '}';\r\n    } else {\r\n      dataFormatted += x;\r\n    }\r\n  }\r\n\r\n  return dataFormatted;\r\n}\r\n\r\nfunction addZero(i) {\r\n  if (i < 10) {\r\n    i = \"0\" + i;\r\n  }\r\n  return i;\r\n}\r\n\r\nfunction returnTimestamp() {\r\n  var d = new Date();\r\n  var timestamp = document.getElementById(\"demo\");\r\n  var h = addZero(d.getHours());\r\n  var m = addZero(d.getMinutes());\r\n  var s = addZero(d.getSeconds());\r\n  return timestamp = h + \":\" + m + \":\" + s;\r\n}\r\n\r\nfunction readMoreLess(moreId, buttonId) {\r\n  var more = document.getElementById(moreId);\r\n  var btn = document.getElementById(buttonId);\r\n\r\n  console.log(more)\r\n\r\n  if (more.style.display === \"none\") {\r\n    btn.innerHTML = \"Read Less\";\r\n    btn.className = \"less\";\r\n    more.style.display = \"inline\";\r\n  } else {\r\n    btn.innerHTML = \"Read More\";\r\n    btn.className = \"more\";\r\n    more.style.display = \"none\";\r\n  }\r\n}\r\n\r\nfunction hideBadgeCounter() {\r\n  counterForBadge = 0;\r\n  document.getElementById('badgeCounter').style.display = \"none\";\r\n}\r\n\r\nfunction showBadgeCounter() {\r\n  counterForBadge += 1;\r\n  document.getElementById('badgeCounter').innerHTML = counterForBadge;\r\n  document.getElementById('badgeCounter').style.display = \"block\";\r\n}\r\n\r\nfunction insertCallbackHTML(title, data) {\r\n  var html_to_insert = '<p class=\"callback\"><b>' + title + ':<span style=\"float: right;\">' + returnTimestamp() + '</span></b><br>' + returnDataFormatted(data) + '</p>'\r\n  document.getElementById('modalBody').insertAdjacentHTML('afterbegin', html_to_insert);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}